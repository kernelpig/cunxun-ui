!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n)}:e(window.jQuery)}(function(e){e.FE.URLRegEx="(^| |\\u00A0)("+e.FE.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}))$",e.FE.PLUGINS.url=function(t){function n(n,r,o){for(var i="";o.length&&"."==o[o.length-1];)i+=".",o=o.substring(0,o.length-1);var a=o;if(t.opts.linkConvertEmailAddress){var l=e.FE.MAIL_REGEX;l.test(a)&&!/^mailto:.*/i.test(a)&&(a="mailto:"+a)}return/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(a)||(a="//"+a),(r?r:"")+"<a"+(t.opts.linkAlwaysBlank?' target="_blank"':"")+(f?' rel="'+f+'"':"")+' href="'+a+'">'+o.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"+i}function r(){return new RegExp(e.FE.URLRegEx,"gi")}function o(e){return t.opts.linkAlwaysNoFollow&&(f="nofollow"),t.opts.linkAlwaysBlank&&(f?f+=" noopener noreferrer":f="noopener noreferrer"),e.replace(r(),n)}function i(e){return!!e&&("A"===e.tagName||!(!e.parentNode||e.parentNode==t.el)&&i(e.parentNode))}function a(e){var t=e.split(" ");return t[t.length-1]}function l(){var n=t.selection.ranges(0),l=n.startContainer;if(!l||l.nodeType!==Node.TEXT_NODE)return!1;if(i(l))return!1;if(r().test(a(l.textContent)))e(l).before(o(l.textContent)),l.parentNode.removeChild(l);else if(l.previousSibling&&"A"===l.previousSibling.tagName){var u=l.previousSibling.innerText+l.textContent;r().test(a(u))&&(e(l.previousSibling).replaceWith(o(u)),l.parentNode.removeChild(l))}}function u(){t.events.on("paste.afterCleanup",function(n){var r=t.doc.createElement("div");r.innerHTML=n;for(var i=t.doc.createTreeWalker(r,NodeFilter.SHOW_TEXT,t.node.filter(function(t){return new RegExp(e.FE.URLRegEx,"gi").test(t.textContent)}),!1);i.nextNode();){var a=i.currentNode;e(a).after(o(a.textContent)).remove()}return r.innerHTML}),t.events.on("keydown",function(n){var r=n.which;!t.selection.isCollapsed()||r!=e.FE.KEYCODE.ENTER&&r!=e.FE.KEYCODE.SPACE&&r!=e.FE.KEYCODE.PERIOD||l()},!0)}var f=null;return{_init:u}}});