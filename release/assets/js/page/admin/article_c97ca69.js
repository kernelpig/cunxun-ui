function ArticlePageRender(){NavbarRender(),FootbarRender()}function ColumnGetListHandler(){var e={creater_uid:createrUidDefault};APIColumnGetList(e,AlertShowAjaxError,function(e){0===e.code?0!==e.list.length&&$.each(e.list,function(){$(".ColumnListField").append($("<option></option>").val(this.id).text(this.name))}):AlertShowError(e.sub_error)})}function ArticleCreateHandler(){var e={column_id:$(".ColumnListField").val(),Title:$(".ArticleTitleField").val(),content:$(".ArticleContentField").val()};APIArticleCreate(e,AlertShowAjaxError,function(e){0===e.code?AlertShowAutoCloseAndGoPage("创建成功","马上跳转当前页面!","/article.html?article_id="+e.id):AlertShowError(e.sub_error)})}function ArticleUpdateHandler(){var e={column_id:$(".ColumnListField").val(),title:$(".ArticleTitleField").val(),content:$(".ArticleContentField").val()},r=GetURIParamStr(location.href,"article_id");APIArticleUpdateById(r,e,AlertShowAjaxError,function(e){0===e.code?AlertShowAutoCloseAndGoPage("创建成功","马上跳转当前页面!","/article.html?article_id="+r):AlertShowError(e.sub_error)})}function ArticleEditorRender(){$(".ArticleContentField").froalaEditor({theme:"gray",height:200,language:"zh_cn",imageUploadParam:"image_key",imageUploadURL:imageBaseURI+"/",imageUploadParams:{xToken:Cookies.get("Authorization")},imageUploadMethod:"POST",imageMaxSize:imageUploadMaxSize,imageAllowedTypes:imageUploadTypes}).on("froalaEditor.image.error",froalaEditorImageUploadErrorHandler)}function ArticleCreateRender(){ArticleEditorRender(),$(".ArticleActionHandler").click(ArticleCreateHandler)}function ArticleUpdateRender(){var e={article_id:GetURIParamStr(location.href,"article_id")};APIArticleGetItem(e,AlertShowAjaxError,function(e){if(0===e.code){if(!e.list||e.list.length<=0)return void AlertShowAutoClose("不存在","此文章不存在");var r=e.list[0];$(".ColumnListField").val(r.column_id),$(".ArticleTitleField").val(r.title),$(".ArticleContentField").val(r.content),ArticleEditorRender(),$(".ArticleActionHandler").click(ArticleUpdateHandler)}else AlertShowError(e.sub_error)})}$(document).ready(function(){ArticlePageRender(),ColumnGetListHandler();var e=GetURIParamStr(location.href,"action");"create"===e?ArticleCreateRender():"update"===e&&ArticleUpdateRender(),$(".am-form").validator(formValidator)});