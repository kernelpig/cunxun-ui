function ColumnGetListHandler(){var e={creater_uid:createrUidDefault};APIColumnGetList(e,AlertShowAjaxError,function(e){if(0===e.code){if(!e.list||0===e.list.length)return;$.each(e.list,function(){{var e="article.html?id="+this.id;$('<a class="am-list-item-hd"></a>').attr("href",e).text(this.title)}$("#column").append($("<option></option>").val(this.id).text(this.name))})}else AlertShowError(e.sub_error)})}function ArticleCreateHandler(){var e={column_id:$("#column").val(),title:$("#title").val(),content:$("#content").val()};APIArticleCreate(e,AlertShowAjaxError,function(e){0===e.code?AlertShowAutoCloseAndGoPage("创建成功","马上跳转当前页面!","/article.html?article_id="+e.id):AlertShowError(e.sub_error)})}function ArticleCreateRender(){IsLogined(),$(".ContentContainer").append(ArticleCreateTemplate),$("#content").froalaEditor({theme:"gray",height:200,language:"zh_cn",imageUploadParam:"image_key",imageUploadURL:imageBaseURI+"/",imageUploadParams:{xToken:Cookies.get("Authorization")},imageUploadMethod:"POST",imageMaxSize:imageUploadMaxSize,imageAllowedTypes:imageUploadTypes,htmlExecuteScripts:!1,htmlRemoveTags:["script","iframe","javascript","frame"]}).on("froalaEditor.image.error",froalaEditorImageUploadErrorHandler),ColumnGetListHandler(),$("#ArticleCreateHandler").click(ArticleCreateHandler),$(".am-form").validator(formValidator)}var ArticleCreateTemplate='<div class="am-container am-margin-top">\n    <form method="post" class="am-form" id="first_setup">\n        <fieldset>\n            <legend>发表新帖</legend>\n            <div class="am-form-group">\n                <div class="am-input-group">\n\n                <span class="am-input-group-label"><i class="am-icon-list"></i></span>\n                    <select id="column">\n                    </select>\n                </div>\n            </div>\n            <div class="am-form-group">\n                <div class="am-input-group">\n                    <span class="am-input-group-label"><i class="am-icon-pencil"></i></span>\n                    <input type="text" id="title" required placeholder="帖子标题" minlength="1" maxlength="60"  data-validation-message="输入标题, 必须为1~60位">\n                </div>\n            </div>\n\n            <div class="am-form-group">\n                <textarea id="content" rows="6" required minlength="10" maxlength="2000" placeholder="在此输入内容, 10~2000字符"  data-validation-message="输入内容, 必须为10~2000位"></textarea>\n            </div>\n\n            <div class="am-form-group">\n                <input type="button" id="ArticleCreateHandler" value="提交" class="am-btn am-btn-primary am-btn-sm">\n            </div>\n        </fieldset>\n    </form>\n</div>';